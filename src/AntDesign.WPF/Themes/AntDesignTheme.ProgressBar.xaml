<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <!-- ===================================================================
         ProgressBar Style — Ant Design "line" variant

         WPF's built-in ProgressBar template already maintains an element
         named PART_Indicator whose width is driven by the control itself
         when using the standard template contract.  We keep that contract
         by naming our fill element PART_Indicator inside a Grid that
         matches the track width, and let the base ProgressBar logic handle
         the percentage calculation via its own OnApplyTemplate override.

         For an indeterminate bar the control internally animates
         PART_Indicator; that animation plays on top of our visual style.
         =================================================================== -->

    <!-- Smooth value-change animation for the fill border width -->
    <Style x:Key="AntDesign.ProgressBar" TargetType="{x:Type ProgressBar}">
        <Setter Property="SnapsToDevicePixels" Value="True" />
        <Setter Property="Height" Value="8" />
        <Setter Property="Minimum" Value="0" />
        <Setter Property="Maximum" Value="100" />
        <Setter Property="Foreground" Value="{DynamicResource AntDesign.Brush.Primary}" />
        <Setter Property="Background" Value="{DynamicResource AntDesign.Brush.Fill.Secondary}" />
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ProgressBar}">
                    <!--
                        TrackBorder — the pill-shaped background strip.
                        ClipToBounds ensures the fill corners never overflow
                        when the fill reaches near 100%.
                    -->
                    <Border
                        x:Name="TrackBorder"
                        Background="{TemplateBinding Background}"
                        CornerRadius="100"
                        Height="{TemplateBinding Height}"
                        ClipToBounds="True">

                        <!--
                            A Grid that stretches to fill the track.
                            The ProgressBar base-class code-behind sets
                            PART_Indicator.Width to the calculated pixel
                            width that represents the current percentage.
                        -->
                        <Grid>
                            <!--
                                PART_Indicator — standard WPF contract.
                                Must be HorizontalAlignment=Left so the
                                base class can assign its pixel width.
                            -->
                            <Border
                                x:Name="PART_Indicator"
                                Background="{TemplateBinding Foreground}"
                                CornerRadius="100"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Stretch">
                                <Border.RenderTransform>
                                    <TranslateTransform />
                                </Border.RenderTransform>
                            </Border>

                            <!-- Indeterminate animation overlay -->
                            <Rectangle
                                x:Name="Animation"
                                Fill="Transparent"
                                HorizontalAlignment="Left"
                                Visibility="Collapsed"
                                ClipToBounds="True">
                                <Rectangle.OpacityMask>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                        <GradientStop Color="Transparent" Offset="0" />
                                        <GradientStop Color="#40FFFFFF" Offset="0.4" />
                                        <GradientStop Color="#80FFFFFF" Offset="0.5" />
                                        <GradientStop Color="#40FFFFFF" Offset="0.6" />
                                        <GradientStop Color="Transparent" Offset="1" />
                                    </LinearGradientBrush>
                                </Rectangle.OpacityMask>
                            </Rectangle>
                        </Grid>
                    </Border>

                    <ControlTemplate.Triggers>
                        <!-- Indeterminate — show Animation, hide the static indicator -->
                        <Trigger Property="IsIndeterminate" Value="True">
                            <Setter TargetName="PART_Indicator" Property="Visibility"
                                    Value="Visible" />
                            <Setter TargetName="Animation" Property="Visibility"
                                    Value="Visible" />
                        </Trigger>

                        <!-- Disabled state -->
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter TargetName="TrackBorder" Property="Background"
                                    Value="{DynamicResource AntDesign.Brush.Fill.Quaternary}" />
                            <Setter TargetName="PART_Indicator" Property="Background"
                                    Value="{DynamicResource AntDesign.Brush.Fill.Secondary}" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- ===================================================================
         Semantic variants
         =================================================================== -->
    <Style x:Key="AntDesign.ProgressBar.Success" TargetType="{x:Type ProgressBar}"
           BasedOn="{StaticResource AntDesign.ProgressBar}">
        <Setter Property="Foreground" Value="{DynamicResource AntDesign.Brush.Success}" />
    </Style>

    <Style x:Key="AntDesign.ProgressBar.Warning" TargetType="{x:Type ProgressBar}"
           BasedOn="{StaticResource AntDesign.ProgressBar}">
        <Setter Property="Foreground" Value="{DynamicResource AntDesign.Brush.Warning}" />
    </Style>

    <Style x:Key="AntDesign.ProgressBar.Error" TargetType="{x:Type ProgressBar}"
           BasedOn="{StaticResource AntDesign.ProgressBar}">
        <Setter Property="Foreground" Value="{DynamicResource AntDesign.Brush.Error}" />
    </Style>

    <!-- Default implicit style -->
    <Style TargetType="{x:Type ProgressBar}" BasedOn="{StaticResource AntDesign.ProgressBar}" />

</ResourceDictionary>
